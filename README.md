# DERECHA

DERECHA is a tool, assoisiated with the paper titled: "NLP-based automated compliance checking of Data Processing Agreements against GDPR", that uses semantic frames to analyze Data Processing Agreements (DPAs) at a phrasal level to verify compliance of DPAs against GDPR. Semantic Frames describe a set of elements that participates in a particular event. They are often used in different Natural Language Processing (NLP) tasks to analyze the information content of a sentence. Notice that for DERECHA to work properly it needs the external libraries wordnet, verbnet, and ws4j.

This README file contains the details on how to use DERECHA, where to find and interpret the empirical evaluation results obtained by DERECHA and reported in the above paper.

## What is released?
- ./DERECHA.zip: is a compressed version of the Maven project, including 
an executable jar file (DERECHA.jar) for running our implementation over a DPA.
- ./SourceCode.zip: contains the source code of the Maven project.
Instructions about using DERECHA are provided below.
- ./EvaluationSet.zip: contains the non-proprietary DPAs which we use in our work. We provide both 
the original DPAs as well as the annotated ones.

## How to use DERECHA?

The tool takes the following parameters (case sensitive) to start the processing. In case that the user doesn't want to give any parameter, the tool will use the default ones to check the compliance of "DPA.docx" (the example DPA in the paper).

* the name of the DPA to be analyzed (-dpaName)
* the level of enrichment that the user wants to be used (-enrichment); elaborated below.

Enrichment is a step that expands the text of the input DPA by including (i) the synonyms or (ii) synonyms and hypernyms of words. For applying (i), enrichment should be set to "0", otherwise for (ii) it should be set to "1". 

For processing one DPA, the user must place the DPA in the folder named "input" and type its name as the value of the parameter -dpaName; for example: -dpaName "DPA.docx"
For processing multiple DPAs the user must place all the DPAs in the folder "input" and type "null" as the value of the parameter -dpaName; for example: -dpaName "null"

## How to run the .jar file?

- Download the compressed project DERECHA.zip to your local machine
- Uncompress and go to the location of the uncompressed folder ./derecha/
- For a simple run (running DERECHA on DPA.docx), use the following command: java -jar DERECHA.jar
- For a customized run, use the following command (Note: This command might require few minutes.): 
java -jar DERECHA.jar -dpaName [DPA_NAME.docx] -controllerName [CONTROLLER_NAME] -processorName [PROCESSOR_NAME] -enrichment [0|1]
- After DERECHA finishes the processing of the DPA, two (.txt) files will appear in the folder named "output" 

## The output of DERECHA
DERECHA generates the following two output files containing the information related to the compliance checking. One will be named "DPA_NAME.txt" and the other "DPA_NAME_cd_info.txt", explained next.

The file "DPA_NAME.txt" will contain the compliance checking report generated by DERECHA. This includes the following information:
* Whether the DPA did pass the automated analysis necessary for compliance with GDPR (this is the recommendation produced by the tool)
* Number of violations and warnings, related to any requirement that hasn't been satisfied in the DPA
* The requirements IDs which the tool finds to be violated

The file "DPA_NAME_cd_info.txt" will contain the details regarding every sentence that satisfies a requirement with the highest matching degree. The information is as follows:

Requirement: Matching Degree -> Statement

For example:
R19: 0.40 -> processor shall provide customer with a certificate of destruction evidencing that the personal data has been destroyed or deleted.

## Evaluation of DERECHA

For the files that have ground truth in "/xlsx/" folder, DERECHA will provide information about TPs, TNs, FPs, FNs, and the evaluation matrix.

## Remarks

We make available the non proprietary original DPAs, and their respective ground truth and output files.
